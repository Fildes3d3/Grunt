{% extends '::base.html.twig' %}
{% block body %}
{{ parent() }}
<div class="row">
    <div class="col-md-8">
    {% if foundArticle is not null %}
        <div class="row">
            <div class="media">
                <h3>Am gasit in categoria: {{ category }} <h4><strong><em>{{ foundArticle.PostTitle }}</em></strong></h4></h3>
                    <div class="caption">
                        <p><strong>{{ foundArticle.ArticleCaption }}</strong></p>
                        <p><em>{{ foundArticle.postData|truncate(1000, true)|raw }}</em></p>
                        <p><em><strong>Scris maiastru in anul domnului: {{ foundArticle.ArticleDate|date('Y d M') }}</strong></em></p>
                    </div>
            </div>
        </div>
        {% if is_granted('ROLE_USER') %}
        <div class="row ">
            <div class="col-md-10">
                <h3>Comentezi?! <strong>
                            <em>...adica e plin de critici...toata lumea se pricepe....</em></strong></h3>
                {% for flashMessage in app.session.flashbag.get('succes') %}
                <div class="panel-heading">
                    <div class="alert alert-success alert-dismissable" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">&times;</span></button>
                        <h2>{{ flashMessage }}</h2>
                    </div>
                </div>
                {% endfor %}
                {% for flashMessage in app.session.flashbag.get('comment_exist') %}
                <div class="panel-body">
                    <div class="panel-heading">
                        <div class="alert alert-warning alert-dismissable" role="alert">
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span></button>
                            <h2>{{ flashMessage }}</h2>
                        </div>
                    </div>
                </div>
                {% endfor %}
                <div class="panel-body">
                    <form method="post" id="commentform" name="commentform" enctype="multipart/form-data"
                        action="{{ path ('comment_garaj', {'page' : foundArticle.PostCategory}) }}">
                    <h4>Baga Comentariul...</h4>
                        <input type="hidden"  name="articleId" value="{{ foundArticle.Id }}">
                        <textarea id="comment" name="comment" class="form-control" rows="4" ></textarea>
                        <div class="row">
                            <div class="col-xs-2 padding-top-10">
                                <button type="submit" class="btn btn-info">Trimite-ti Parerea</button>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="panel-body">
                    <ul class="comment">
                    {% for comment in comments %}
                        {% if foundArticle.Id == comment.ArticleId %}
                            <li>
                                <p><span class="glyphicon glyphicon-user"> Comentariul lui: </span>
                                    <em> {{ comment.user.username }} </em></p>
                                <p><span class="glyphicon glyphicon-time"> din anul domnului: </span>
                                    <em> {{ comment.commentDate|date('Y d M') }} </em></p>
                                <p><span class="glyphicon glyphicon-comment"> care zice ca: </span>
                                    <em> {{ comment.comment }} </em></p>
                                <button type="button" class="btn btn-info">Raspunde</button>
                            </li>
                        {% endif %}
                    {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
        {% endif %}
    {% else %}
        {% for articleMain in Main %}
        <div class="row">
            <div class="media">
                <h3>Ultimele Articole {{ category }} <h4><strong><em>{{ articleMain.articleCaption }}</em></strong></h4></h3>
                <div class="caption">
                    <h2><strong>{{ articleMain.PostTitle }}</strong></h2>
                    <p><em>{{ articleMain.postData|raw }}</em></p>
                    <p><em><strong>Scris maiastru in anul domnului: {{ articleMain.ArticleDate|date('Y d M') }}</strong></em></p>
                </div>
            </div>
        </div>
            {% if is_granted('ROLE_USER') %}
            <div class="row ">
                <div class="col-md-10">
                    <h3>Comentezi?! <strong>
                            <em>...adica e plin de critici...toata lumea se pricepe....</em></strong></h3>
                    {% for flashMessage in app.session.flashbag.get('succes') %}
                        <div class="panel-heading">
                            <div class="alert alert-success alert-dismissable" role="alert">
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                    <span aria-hidden="true">&times;</span></button>
                                <h2>{{ flashMessage }}</h2>
                            </div>
                        </div>
                    {% endfor %}
                        <div class="panel-body">
                    {% for flashMessage in app.session.flashbag.get('comment_exist') %}
                            <div class="panel-heading">
                                <div class="alert alert-warning alert-dismissable" role="alert">
                                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                        <span aria-hidden="true">&times;</span></button>
                                    <h2>{{ flashMessage }}</h2>
                                </div>
                            </div>
                    {% endfor %}
                        </div>
                        <div class="panel-body">
                            <form method="post" id="commentform" name="commentform" enctype="multipart/form-data"
                                action="{{ path ('comment_garaj', {'page' : articleMain.postCategory}) }}">
                                <h4>Baga Comentariul...</h4>
                                <input type="hidden"  name="articleId" value="{{ articleMain.Id }}">
                                <textarea id="comment" name="comment" class="form-control" rows="4" ></textarea>
                                    <div class="row">
                                        <div class="col-xs-2 padding-top-10">
                                            <button type="submit" class="btn btn-info">Trimite-ti Parerea</button>
                                        </div>
                                    </div>
                            </form>
                        </div>
                        <div class="panel-body">
                            <ul class="comment">
                            {% for comment in comments %}
                                {% if articleMain.Id == comment.ArticleId %}
                                <li>
                                    <p><span class="glyphicon glyphicon-user"> Comentariul lui: </span>
                                        <em> {{ comment.user.username }} </em></p>
                                    <p><span class="glyphicon glyphicon-time"> din anul domnului: </span>
                                        <em> {{ comment.commentDate|date('Y d M') }} </em></p>
                                    <p><span class="glyphicon glyphicon-comment"> care zice ca: </span>
                                        <em> {{ comment.comment }} </em></p>
                                    <button type="button" class="btn btn-info">Raspunde</button>
                                </li>
                                {% endif %}
                            {% endfor %}
                            </ul>
                        </div>
                </div>
            </div>
            {% endif %}
        {% endfor %}
    {% endif %}
    </div>
    <div class="col-md-4">
        <div class="row">
            <div class="container-fluid">
                <div class="thumbnail">
                    {% for articleSide in Side %}
                        <h4>Ultimele Articole {{ articleSide.postCategory|capitalize }} </h4>
                        <div class="caption">
                            <p><em>{{ articleSide.postData|truncate(400, true)|raw }}</em></p>
                            <p><em><strong>Scris maiastru in anul domnului: {{ articleSide.ArticleDate|date('Y') }}</strong></em></p>
                            <a href="{{ path('grunt_article', {'page' : articleSide.postCategory, 'id' : articleSide.id }) }}" class="btn btn-info">Citeste mai departe...</a>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <div class="row">
            <div class="container-fluid">
                <div class="thumbnail">
                    {% for articleAside in Aside %}
                        <h4>Ultimele Articole {{ articleAside.postCategory|capitalize}}</h4>
                        <div class="caption">
                            <p><em>{{ articleAside.postData|truncate(400, true)|raw }}</em></p>
                            <p><em><strong>Scris maiastru in anul domnului: {{ articleAside.ArticleDate|date('Y') }}</strong></em></p>
                            <a href="{{ path('grunt_article', {'page' : articleAside.postCategory, 'id' : articleAside.id }) }}" class="btn btn-info">Citeste mai departe...</a>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>

    <div class="row">
        <div class="col-md-12" id="footer">
            Copyright 2017. FildEs Flight Co.
        </div>
    </div>
</div>
{% endblock %}